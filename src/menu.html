<!DOCTYPE html>
<html>
  <head>
    <title>Menu</title>
  </head>
  <body>
    <h1>Choix des ingr√©dients</h1>
    <form id="ingredientForm">
      <label for="ingredients">Select Ingredients:</label><br />
      <input
        type="checkbox"
        id="ingredient1"
        name="ingredient"
        value="Champignon"
      />
      Champignon<br />
      <input
        type="checkbox"
        id="ingredient2"
        name="ingredient"
        value="Chevre"
      />
      Chevre<br />
      <input
        type="checkbox"
        id="ingredient3"
        name="ingredient"
        value="Emmental"
      />
      Emmental<br />
      <input
        type="checkbox"
        id="ingredient4"
        name="ingredient"
        value="Epinard"
      />
      Epinard<br />
      <input
        type="checkbox"
        id="ingredient5"
        name="ingredient"
        value="Poireaux"
      />
      Poireaux<br />
      <input
        type="checkbox"
        id="ingredient6"
        name="ingredient"
        value="Poivron"
      />
      Poivron<br />
      <input
        type="checkbox"
        id="ingredient7"
        name="ingredient"
        value="Tomates"
      />
      Tomates<br /><br />
      <input type="checkbox" id="ingredient8" name="ingredient" value="Oeufs" />
      Oeufs<br /><br />
      <input
        type="checkbox"
        id="ingredient9"
        name="ingredient"
        value="Jambon"
      />
      Jambon<br /><br />

      <!-- New text input field -->
      <label for="additionalText">Additional Text:</label><br />
      <input
        type="text"
        id="additionalText"
        name="additionalText"
      /><br /><br />

      <input type="submit" value="Submit" />
    </form>
    <script>
      document
        .getElementById("ingredientForm")
        .addEventListener("submit", function (event) {
          event.preventDefault(); // Prevent the default form submission

          // Get all selected ingredients
          const selectedIngredients = Array.from(
            document.querySelectorAll('input[name="ingredient"]:checked')
          ).map((checkbox) => checkbox.value);

          // Get the additional text
          const additionalText =
            document.getElementById("additionalText").value;

          // Merge the ingredients and additional text
          const allTexts = [
            ...selectedIngredients,
            "      ",
            "      ",
            `Pour ${additionalText}`,
          ].join(",");

          // Send a GET request with the merged texts
          fetch(`/print?texts=${encodeURIComponent(allTexts)}`)
            .then((response) => response.json())
            .then((data) => {
              console.log(data); // Handle the response data
            })
            .catch((error) => {
              console.error("Error:", error); // Handle any errors
            });
        });
    </script>
  </body>
</html>
